function modula_pro_get_url_parameters(t){return decodeURIComponent((new RegExp("[?|&]"+t+"=([^&;]+?)(&|#|;|$)").exec(location.search)||[,""])[1].replace(/\+/g,"%20"))||!1}!function(t){"use strict";function i(t){this.instance=t,this.filter="*",this.hiddenItems=t.$element.find(".hidden-items .modula-hidden-item"),this.instance.options.haveFilters&&this.initFilters(),"fancybox"==this.instance.options.lightbox&&this.initLightbox()}i.prototype.initLightbox=function(){var r=this,l=r.instance;l.$element.on("click",".modula-item-link:not( .modula-simple-link )",function(t){t.preventDefault();var e=l.$items.filter(r.filter).filter(":not( .modula-simple-link )"),i=jQuery.map(e,function(t){var e=jQuery(t).find(".modula-item-link"),i=jQuery(t).find(".pic");return{src:e.attr("href"),opts:{caption:e.data("caption"),alt:i.attr("alt"),thumb:e.attr("data-thumb"),image_id:e.attr("data-image-id")}}});if(0<r.hiddenItems.length){var o=jQuery.map(r.hiddenItems.filter(r.filter),function(t){var e=jQuery(t);return{src:e.attr("href"),opts:{caption:e.data("caption"),alt:"",thumb:e.attr("data-thumb"),image_id:e.attr("data-image-id")}}});i=i.concat(o)}var n=e.index(jQuery(this).parents(".modula-item"));l.options.lightboxOpts.beforeLoad=function(){jQuery(document).trigger("modula_fancybox_lightbox_before_load",[l,this])},l.options.lightboxOpts.afterLoad=function(){jQuery(document).trigger("modula_fancybox_lightbox_after_load",[l,this])},l.options.lightboxOpts.beforeShow=function(){jQuery(document).trigger("modula_fancybox_lightbox_before_show",[l,this])},l.options.lightboxOpts.afterShow=function(){jQuery(document).trigger("modula_fancybox_lightbox_after_show",[l,this])},l.options.lightboxOpts.beforeClose=function(){jQuery(document).trigger("modula_fancybox_lightbox_before_close",[l,this])},l.options.lightboxOpts.afterClose=function(){jQuery(document).trigger("modula_fancybox_lightbox_after_close",[l,this])},l.options.lightboxOpts.onInit=function(){jQuery(document).trigger("modula_fancybox_lightbox_on_init",[l,this])},l.options.lightboxOpts.onActivate=function(){jQuery(document).trigger("modula_fancybox_lightbox_on_activate",[l,this])},l.options.lightboxOpts.onDeactivate=function(){jQuery(document).trigger("modula_fancybox_lightbox_on_deactivate",[l,this])},jQuery.modulaFancybox.open(i,l.options.lightboxOpts,n)})},i.prototype.initFilters=function(){var e=this,i=e.instance;if(void 0!==i.options.defaultActiveFilter&&("All"==i.options.defaultActiveFilter?e.filter="*":e.filter=".jtg-filter-"+i.options.defaultActiveFilter),"1"==i.options.filterClick){var t=modula_pro_get_url_parameters("jtg-filter");t&&(e.filter=".jtg-filter-"+t)}"1"==i.options.dropdownFilters?i.$element.on("change",".filters",function(t){jQuery(this).hasClass("menu__item--current")||(e.filter=".jtg-filter-"+this.value,i.$element.find(".filters .menu__item--current").removeClass("menu__item--current"),i.$element.find(".filters option[value='"+this.value+"']").addClass("menu__item--current").prop("selected","selected"),i.isIsotope?(i.$items.removeClass("jtg-hidden"),i.$items.not(e.filter).addClass("jtg-hidden"),i.reset(),i.$itemsCnt.modulaisotope({filter:e.filter})):i.$itemsCnt.justifiedGallery({filter:e.filter}))}):i.$element.on("click",".filters a",function(t){if("0"!=i.options.filterClick)return!0;t.preventDefault(),jQuery(this).parent().hasClass("menu__item--current")||(e.filter=".jtg-filter-"+jQuery(this).data("filter"),i.$element.find(".filters .menu__item--current").removeClass("menu__item--current"),i.$element.find(".filters a[data-filter='"+jQuery(this).attr("data-filter")+"']").parent().addClass("menu__item--current"),i.isIsotope?(i.$items.removeClass("jtg-hidden"),i.$items.not(e.filter).addClass("jtg-hidden"),i.reset(),i.$itemsCnt.modulaisotope({filter:e.filter})):i.$itemsCnt.justifiedGallery({filter:e.filter}))}),i.$element.find(".filter-by-wrapper").click(function(){var t=jQuery(this);i.$element.find(".filters").hasClass("active")?(i.$element.find(".filters").hide(600).removeClass("active"),t.removeClass("opened")):(i.$element.find(".filters").show(600).addClass("active"),t.addClass("opened"))}),"*"!=e.filter&&""!=e.filter&&(i.isIsotope?(i.$items.removeClass("jtg-hidden"),i.$items.not(e.filter).addClass("jtg-hidden"),i.reset(),i.$itemsCnt.modulaisotope({filter:e.filter})):i.$itemsCnt.justifiedGallery({filter:e.filter}))},t(document).on("modula_api_after_init",function(t,e){new i(e)})}(jQuery);